---
# yaml-language-server: $schema=https://schema.blue-build.org/module-v1.json

modules:
  - type: dnf
    install:
      packages:
        - epel-release
    remove:
      packages:
        - adcli
        - libdnf-plugin-subscription-manager
        - python3-subscription-manager-rhsm
        - subscription-manager
        - subscription-manager-rhsm-certificates
        - toolbox
        - yggdrasil

  - type: dnf
    repos:
      cleanup: true
      files:
        - tailscale.repo
      copr: 
        - ublue-os/packages
      keys:
        - tailscale.asc
    install:
      install-weak-deps: false
      packages:
        - repo: epel
          packages:
            - just
            - cockpit-machines
            - cockpit-networkmanager
            - cockpit-podman
            - cockpit-selinux
            - cockpit-storaged
            - cockpit-system
            - firewalld
            - git-core
            - libvirt-client
            - libvirt-daemon
            - libvirt-daemon-kvm
            - NetworkManager-wifi
            - open-vm-tools
            - pcp-zeroconf
            - qemu-guest-agent
            - rsync
            - systemd-resolved
            - udisks2-lvm2
            - virt-install
            - xdg-user-dirs
            - tailscale
            - ublue-os-libvirt-workarounds
    
  - type: dnf
    remove:
      packages:
        - epel-release