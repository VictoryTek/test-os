---
modules:
  # Latest build
  - type: dnf
    repos:
      cleanup: true
      copr:
        - ryanabx/cosmic-epoch
        
    install:
      # Core COSMIC desktop
      - cosmic-desktop
      - cosmic-session
      - cosmic-settings
      - cosmic-greeter
      - cosmic-apps

      # System76 utilities (optional)
      - system76-power
      - system76-driver

    remove:
      # Remove GNOME components to prevent conflicts
      - gnome-shell
      - gnome-session
      - gnome-control-center
      - gnome-terminal
      - gnome-shell-extension*
      - mutter

  # --- Systemd Configuration ---
  - type: systemd
    source: local
    systemd:
      enable:
        - cosmic-greeter.service
      disable:
        - gdm.service
      set-default: graphical.target

  # --- Copy Your Custom Files (wallpapers, plymouth, etc.) ---
  - type: files
    source: local
    files:
      - source: files/system
        destination: /usr/share