# Setup /var/nix directory structure for Nix package manager on immutable OS
# A bind mount (nix.mount) maps /var/nix to /nix at boot
# This creates the full directory structure in /var/nix

# Create main /var/nix directory
d /var/nix 0755 root root - -

# Create store directory (needs special permissions for nixbld group)
d /var/nix/store 1775 root nixbld - -

# Create var subdirectories (Nix expects these at /nix/var/nix/*)
d /var/nix/var 0755 root root - -
d /var/nix/var/nix 0755 root root - -
d /var/nix/var/nix/db 0755 root root - -
d /var/nix/var/nix/gcroots 0755 root root - -
d /var/nix/var/nix/profiles 0755 root root - -
d /var/nix/var/nix/temproots 0755 root root - -
d /var/nix/var/nix/userpool 0755 root root - -
d /var/nix/var/nix/daemon-socket 0755 root root - -
